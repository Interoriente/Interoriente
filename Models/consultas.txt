
1. Valor ventas anuales.
    Dos datos:
        1. Mes
        2. Vlr. Total de ventas realizadas en ese mes

=========
Nota: Preguntar por qué no funcionó con Having

SELECT month(FA.fechaFactura) AS 'Mes', 
SUM(FP.cantidadFacturaPublicacion * PU.costoPublicacion) AS 'Total'
FROM tblFactura AS FA
INNER JOIN tblFacturaPublicacion AS FP
ON FP.numFacturaPublicacion = FA.numeroFactura
INNER JOIN tblPublicacion AS PU 
ON PU.idPublicacion = FP.idPublicacionFactura
WHERE YEAR(FA.fechaFactura) = YEAR(CURDATE()) 
AND PU.docIdentidadPublicacion = 'documento'
GROUP BY month(FA.fechaFactura)
=========
2. Cantidad de ventas de x día a y día de la semana pasada

    Datos:
        1. Cantidad de ventas realizadas por día en los últimos 7 días
        2. De la semana anterior a la actual

SELECT DAY(FA.fechaFactura), COUNT(FA.numeroFactura)
FROM tblFactura as FA
INNER JOIN tblFacturaPublicacion as FP
ON FP.numFacturaPublicacion=FA.numeroFactura
INNER JOIN tblPublicacion AS PU 
ON PU.idPublicacion = FP.idPublicacionFactura 
WHERE FA.fechaFactura BETWEEN DATE(DATE_SUB(NOW(),INTERVAL 7 DAY))
AND NOW() AND PU.docIdentidadPublicacion='documento'
GROUP BY DAY(FA.fechaFactura)


3. Publicaciones más exitosas: 
    1. Título
    2. No. Ventas
    3. Cantidad en stock
    4. Porcentaje??

SELECT PU.nombrePublicacion AS 'titulo', COUNT(PU.idPublicacion)
AS 'numVentas', PU.stockPublicacion AS 'stock', AVG(PU.costoPublicacion*FP.cantidadFacturaPublicacion)
FROM tblPublicacion as PU
INNER JOIN tblFacturaPublicacion as FP
ON FP.idPublicacionFactura=PU.idPublicacion
WHERE PU.docIdentidadPublicacion='documento'
ORDER BY DESC
LIMIT 5

4. Cantidad ventas hoy. Total ventas hoy
SELECT COUNT(FP.idPublicacionFactura) 'Cantidad ventas hoy',SUM(PU.costoPublicacion*FP.cantidadFacturaPublicacion) as 'Total ventas hoy'
FROM tblFactura as FA
INNER JOIN tblFacturaPublicacion as FP
ON FP.numFacturaPublicacion=FA.numeroFactura
INNER JOIN tblPublicacion AS PU 
ON PU.idPublicacion = FP.idPublicacionFactura
WHERE FA.fechaFactura=CURDATE() AND PU.docIdentidadPublicacion='documento'

5. Ventas por ciudad//...\\
SELECT CI.nombreCiudad as 'Municipio',SUM(FP.cantidadFacturaPublicacion*PU.costoPublicacion) as 'Total Ventas'
FROM tblCiudad as CI
INNER JOIN tblDirecciones as DI
ON DI.ciudadDireccion=CI.idCiudad
INNER JOIN tblUsuario as US
ON US.documentoIdentidad=DI.docIdentidadDireccion
INNER JOIN tblFactura as FA
ON FA.docIdentidadFactura=US.documentoIdentidad
GROUP BY CI.nombreCiudad
ORDER BY SUM(FP.cantidadFacturaPublicacion*PU.costoPublicacion) DESC

6. Alerta de stock (A cuántas publicaciones se les va a terminar el stock)
SELECT nombrePublicacion,stockPublicacion
FROM tblPublicacion
WHERE stockPublicacion<=5 and docIdentidadPublicacion='documento'

7. Total de ventas de este mes y porcentaje de último mes comparado con el actual.
SELECT MONTH(FA.fechaFactura)
FROM tblFactura as FA
INNER JOIN tblFacturaPublicacion as FP
ON FP.numFacturaPublicacion=FA.numeroFactura
INNER JOIN tblPublicacion AS PU 
ON PU.idPublicacion = FP.idPublicacionFactura
WHERE FA.fechaFactura BETWEEN MONTH(DATE_SUB(NOW(), INTERVAL 1 MONTH))
AND NOW()
GROUP BY MONTH(FA.fechaFactura)

8. Número de publicaciones sin validar
SELECT nombrePublicacion
FROM tblPublicacion
WHERE validacionPublicacion=0 and docIdentidadPublicacion='documento'
